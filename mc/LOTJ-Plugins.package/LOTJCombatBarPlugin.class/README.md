I'm a combat bar plugin.
I receive different information from a character and open a combat panel when character is in a fight.

I know a character is in a fight because I receive OPPONENT_NAME tick who changes from empty to a name (not optimal, but is the only information I can take).

I show enemy health and character health, movement and force (if exists), other elements could join later.